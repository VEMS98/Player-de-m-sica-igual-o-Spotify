const songName=document.getElementById("song-name"),bandName=document.getElementById("band-name"),song=document.getElementById("audio"),cover=document.getElementById("cover"),play=document.getElementById("play"),next=document.getElementById("next"),previous=document.getElementById("previous"),likeButton=document.getElementById("like"),currentProgress=document.getElementById("current-progress"),progressContainer=document.getElementById("progress-container"),shuffleButton=document.getElementById("shuffle"),repeatButton=document.getElementById("repeat"),songTime=document.getElementById("song-time"),totalTime=document.getElementById("total-time"),cupidTwinVersion={songName:"Cupid (Twin Version)",artist:"Fifty Fifty",file:"Cupid (Twin Version)",liked:!1},ditto={songName:"Ditto",artist:"NewJeans",file:"Ditto",liked:!0},holdOnTight={songName:"Hold On Tight",artist:"Aespa",file:"Hold On Tight",liked:!1},loveMeLikeThis={songName:"Love Me Like This",artist:"Nmixx",file:"Love Me Like This",liked:!1};let isPlaying=!1,isShuffled=!1,repeatOn=!1;const originalPlaylist=JSON.parse(localStorage.getItem("playlist"))??[cupidTwinVersion,ditto,holdOnTight,loveMeLikeThis];let sortedPlaylist=[...originalPlaylist],index=0;function playSong(){play.querySelector(".bi").classList.remove("bi-play-circle-fill"),play.querySelector(".bi").classList.add("bi-pause-circle-fill"),song.play(),isPlaying=!0}function pauseSong(){play.querySelector(".bi").classList.add("bi-play-circle-fill"),play.querySelector(".bi").classList.remove("bi-pause-circle-fill"),song.pause(),isPlaying=!1}function playPauseDecider(){!0===isPlaying?pauseSong():playSong()}function likeButtonRender(){!0===sortedPlaylist[index].liked?(likeButton.querySelector(".bi").classList.remove("bi-heart"),likeButton.querySelector(".bi").classList.add("bi-heart-fill"),likeButton.classList.add("button-active")):(likeButton.querySelector(".bi").classList.add("bi-heart"),likeButton.querySelector(".bi").classList.remove("bi-heart-fill"),likeButton.classList.remove("button-active"))}function initializeSong(){cover.src=`imagens/${sortedPlaylist[index].file}.png`,song.src=`songs/${sortedPlaylist[index].file}.mp3`,songName.innerText=sortedPlaylist[index].songName,bandName.innerText=sortedPlaylist[index].artist,likeButtonRender()}function previousSong(){0===index?index=sortedPlaylist.length:index-=1,initializeSong(),playSong()}function nextSong(){index===sortedPlaylist.length-1?index=0:index+=1,initializeSong(),playSong()}function updateProgress(){const a=100*(song.currentTime/song.duration);currentProgress.style.setProperty("--progress",`${a}%`),songTime.innerText=toHHMMSS(song.currentTime)}function jumpTo(a){const b=progressContainer.clientWidth,c=a.offsetX,d=c/b*song.duration;song.currentTime=d}function shuffleArray(a){const b=a.length;for(let c=b-1;0<c;){let d=Math.floor(Math.random()*b),e=a[c];a[c]=a[d],a[d]=e,c-=1}}function shuffleButtonClicked(){!1===isShuffled?(isShuffled=!0,shuffleArray(sortedPlaylist),shuffleButton.classList.add("button-active")):(isShuffled=!1,sortedPlaylist=[...originalPlaylist],shuffleButton.classList.remove("button-active"))}function repeatButtonClicked(){!1===repeatOn?(repeatOn=!0,repeatButton.classList.add("button-active")):(repeatOn=!1,repeatButton.classList.remove("button-active"))}function nextOrRepeat(){!1===repeatOn?nextSong():playSong()}function toHHMMSS(a){let b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return`${b.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}function updatedTotalTime(){totalTime.innerText=toHHMMSS(song.duration)}function likeButtonClicked(){sortedPlaylist[index].liked=!(!1!==sortedPlaylist[index].liked),likeButtonRender(),localStorage.setItem("playlist",JSON.stringify(originalPlaylist))}initializeSong(),play.addEventListener("click",playPauseDecider),previous.addEventListener("click",previousSong),next.addEventListener("click",nextSong),song.addEventListener("timeupdate",updateProgress),song.addEventListener("ended",nextOrRepeat),song.addEventListener("loadedmetadata",updatedTotalTime),progressContainer.addEventListener("click",jumpTo),shuffleButton.addEventListener("click",shuffleButtonClicked),repeatButton.addEventListener("click",repeatButtonClicked),likeButton.addEventListener("click",likeButtonClicked);